"use strict";(self["webpackChunksilverfish"]=self["webpackChunksilverfish"]||[]).push([[328],{6170:function(e,t,o){o.d(t,{Z:function(){return i}});var a=o(3396),r=o(6265),n=o.n(r),c=o(4677);function i(){const e=(0,c.pm)(),t=(0,a.FN)()?.appContext.config.globalProperties.$endpoint,o=(0,a.FN)()?.appContext.config.globalProperties.$apiVersionRoute;function r(){return`${t}${o}`}function i(t){return new Promise(((o,a)=>n()({url:`${r()}/novels`,method:"GET",headers:{Authorization:t}}).then((e=>e.data.success?o(e.data.data.map((e=>({...e,lastCrawlTime:new Date(e.lastCrawlTime)})))):a(e.data.data))).catch((t=>e.error(`發生錯誤: ${t.toString()}`)))))}function l(t,o){return new Promise(((a,c)=>n()({url:`${r()}/novel`,method:"GET",headers:{Authorization:t},params:{novel_id:o}}).then((e=>{if(e.data.success){const t=e.data.data;return a({isEnable:t.isEnable,novelID:t.novelID,author:t.author,description:t.description,dns:t.dns,url:t.url,title:t.title,cover_url:t.coverUrl,chapters:t.chapters,lastCrawlTime:new Date(t.lastCrawlTime)})}return c(e.data.data)})).catch((t=>e.error(`發生錯誤: ${t.toString()}`)))))}function s(t,o,a){return new Promise(((c,i)=>n()({url:`${r()}/chapter`,method:"GET",headers:{Authorization:t},params:{novel_id:o,chapter_index:a}}).then((e=>e.data.success?c(e.data.data):i(e.data.data))).catch((t=>e.error(`發生錯誤: ${t.toString()}`)))))}function d(t){return new Promise(((o,a)=>n()({url:`${r()}/comics`,method:"GET",headers:{Authorization:t}}).then((e=>e.data.success?o(e.data.data.map((e=>({...e,lastCrawlTime:new Date(e.lastCrawlTime)})))):a(e.data.data))).catch((t=>e.error(`發生錯誤: ${t.toString()}`)))))}function u(t,o){return new Promise(((a,c)=>n()({url:`${r()}/comic`,method:"GET",headers:{Authorization:t},params:{comic_id:o}}).then((e=>{if(e.data.success){const t=e.data.data;return a({comicID:t.comicID,author:t.author,description:t.description,dns:t.dns,url:t.url,title:t.title,cover_url:t.coverUrl,chapters:t.chapters,lastCrawlTime:new Date(t.lastCrawlTime)})}return c(e.data.data)})).catch((t=>e.error(`發生錯誤: ${t.toString()}`)))))}function h(t,o,a){return new Promise(((c,i)=>n()({url:`${r()}/comic/chapter`,method:"GET",headers:{Authorization:t},params:{comic_id:o,chapter_index:a}}).then((e=>e.data.success?c(e.data.data):i(e.data.data))).catch((t=>e.error(`發生錯誤: ${t.toString()}`)))))}return{endpointRoute:r,fetchNovels:i,fetchNovelByID:l,fetchNovelChapter:s,fetchComics:d,fetchComicByID:u,fetchComicChapter:h}}},2771:function(e,t,o){o.r(t),o.d(t,{default:function(){return K}});var a=o(3396),r=o(7139),n=o(9242);const c={class:"row"},i={class:"col-8 offset-2 col-md-8 offset-md-2"},l=(0,a._)("h5",null,"Novels",-1),s={class:"row"},d={class:"col col-4"},u=["href"],h=(0,a._)("br",null,null,-1),m={class:"col"},v={class:"input-group mb-3"},p=["disabled"],f=(0,a.Uk)(" Add "),w={class:"input-group mb-3"},g=["value"],b=["disabled"],C=(0,a.Uk)(" Delete "),D=(0,a._)("h5",null,"Comics",-1),_={class:"row"},$={class:"col col-4"},N=["href"],I=(0,a._)("br",null,null,-1),y={class:"col"},U={class:"input-group mb-3"},T=["disabled"],k=(0,a.Uk)(" Add "),P={class:"input-group mb-3"},z=["value"],E=["disabled"],S=(0,a.Uk)(" Delete ");function A(e,t,o,A,H,j){const F=(0,a.up)("font-awesome-icon");return(0,a.wg)(),(0,a.iD)("div",{id:"content",class:"container",style:(0,r.j5)({"min-height":`${e.withFootHeight}px`})},[(0,a._)("div",c,[(0,a._)("div",i,[l,(0,a._)("div",s,[(0,a._)("div",d,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.fetchers.novels,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e},[(0,a._)("a",{href:"http://"+e,target:"_blank"},(0,r.zw)(e),9,u),h])))),128))]),(0,a._)("div",m,[(0,a._)("div",v,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.addNovelUrl=t),class:"form-control"},null,512),[[n.nr,e.addNovelUrl]]),(0,a._)("button",{onClick:t[1]||(t[1]=(...t)=>e.addNovel&&e.addNovel(...t)),disabled:""===e.addNovelUrl,class:"btn-sm btn-color-1",type:"button"},[(0,a.Wm)(F,{icon:"arrow-circle-right"}),f],8,p)]),(0,a._)("div",w,[(0,a.wy)((0,a._)("select",{class:"form-control","onUpdate:modelValue":t[2]||(t[2]=t=>e.deleteNovelID=t)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.novels,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.novelID,value:e.novelID},(0,r.zw)(`${e.novelID} / ${e.title} / ${e.author}`),9,g)))),128))],512),[[n.bM,e.deleteNovelID]]),(0,a._)("button",{onClick:t[3]||(t[3]=(...t)=>e.deleteNovel&&e.deleteNovel(...t)),disabled:""===e.deleteNovelID,class:"btn-sm btn-color-1",type:"button"},[(0,a.Wm)(F,{icon:"arrow-circle-right"}),C],8,b)])])]),D,(0,a._)("div",_,[(0,a._)("div",$,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.fetchers.comics,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e},[(0,a._)("a",{href:"http://"+e,target:"_blank"},(0,r.zw)(e),9,N),I])))),128))]),(0,a._)("div",y,[(0,a._)("div",U,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.addComicUrl=t),class:"form-control"},null,512),[[n.nr,e.addComicUrl]]),(0,a._)("button",{onClick:t[5]||(t[5]=(...t)=>e.addComic&&e.addComic(...t)),disabled:""===e.addComicUrl,class:"btn-sm btn-color-1",type:"button"},[(0,a.Wm)(F,{icon:"arrow-circle-right"}),k],8,T)]),(0,a._)("div",P,[(0,a.wy)((0,a._)("select",{class:"form-control","onUpdate:modelValue":t[6]||(t[6]=t=>e.deleteComicID=t)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.comics,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.comicID,value:e.comicID},(0,r.zw)(`${e.comicID} / ${e.title} / ${e.author}`),9,z)))),128))],512),[[n.bM,e.deleteComicID]]),(0,a._)("button",{onClick:t[7]||(t[7]=(...t)=>e.deleteComic&&e.deleteComic(...t)),disabled:""===e.deleteComicID,class:"btn-sm btn-color-1",type:"button"},[(0,a.Wm)(F,{icon:"arrow-circle-right"}),S],8,E)])])])])])],4)}var H=o(4870),j=o(3196),F=o(5410),G=o(6265),x=o.n(G),B=o(4677),L=o(6170);function O(){const e=(0,B.pm)(),t=(0,a.FN)()?.appContext.config.globalProperties.$endpoint,{endpointRoute:o}=(0,L.Z)();function r(o){return new Promise(((a,r)=>x()({url:`${t}/admin/fetchers`,method:"GET",headers:{Authorization:o}}).then((e=>!0===e.data.success?a(e.data.data):r(e.data.data))).catch((t=>e.error(`發生錯誤: ${t.toString()}`)))))}function n(t,a){return new Promise(((r,n)=>x()({url:`${o()}/novel`,method:"POST",headers:{Authorization:t},data:(0,F.stringify)({novel_url:a})}).then((e=>!0===e.data.success?r(e.data.data):n(e.data.data))).catch((t=>e.error(`發生錯誤: ${t.toString()}`)))))}function c(t,a){return new Promise(((r,n)=>x()({url:`${o()}/novel/${a}`,method:"DELETE",headers:{Authorization:t}}).then((e=>!0===e.data.success?r(e.data.data):n(e.data.data))).catch((t=>e.error(`發生錯誤: ${t.toString()}`)))))}function i(t,a){return new Promise(((r,n)=>x()({url:`${o()}/comic`,method:"POST",headers:{Authorization:t},data:(0,F.stringify)({comic_url:a})}).then((e=>!0===e.data.success?r(e.data.data):n(e.data.data))).catch((t=>e.error(`發生錯誤: ${t.toString()}`)))))}function l(t,a){return new Promise(((r,n)=>x()({url:`${o()}/comic/${a}`,method:"DELETE",headers:{Authorization:t}}).then((e=>!0===e.data.success?r(e.data.data):n(e.data.data))).catch((t=>e.error(`發生錯誤: ${t.toString()}`)))))}return{adminFetcherList:r,addNewNovel:n,deleteNovelByID:c,addNewComic:i,deleteComicByID:l}}var R=(0,a.aZ)({setup(){const e=(0,B.pm)(),t=(0,j.oR)(),{adminFetcherList:o,addNewComic:r,addNewNovel:n,deleteComicByID:c,deleteNovelByID:i}=O(),{fetchComics:l,fetchNovels:s}=(0,L.Z)(),d=(0,a.f3)("withFootHeight"),u=t.getters["auth/getSession"],h=(0,H.qj)({novels:[],comics:[]}),m=(0,H.qj)([]),v=(0,H.qj)([]),p=(0,H.iH)(""),f=(0,H.iH)(""),w=(0,H.iH)(""),g=(0,H.iH)(""),b=async()=>{o(u).then((e=>{Object.assign(h.novels,e.fetchers.novels),Object.assign(h.comics,e.fetchers.comics)})),Object.assign(v,await s(u)),Object.assign(m,await l(u))},C=()=>{""!==p.value?n(u,p.value).then((t=>{e("添加成功！"),b(),console.log(t)})).catch((t=>{e.error("添加失敗!"),console.error(t)})):e.error("Novel URL不得為空.")},D=()=>{""!==f.value?i(u,f.value).then((t=>{e("刪除成功！"),b(),console.log(t)})).catch((t=>{e.error("刪除失敗!"),console.error(t)})):e.error("Novel ID不得為空.")},_=()=>{""!==w.value?r(u,w.value).then((t=>{e("添加成功！"),b(),console.log(t)})).catch((t=>{e.error("添加失敗!"),console.error(t)})):e.error("Comic URL不得為空.")},$=()=>{""!==g.value?c(u,g.value).then((t=>{e("刪除成功！"),b(),console.log(t)})).catch((t=>{e.error("刪除失敗!"),console.error(t)})):e.error("Comic ID不得為空.")};return(0,a.bv)((()=>b())),{withFootHeight:d,fetchers:h,comics:m,novels:v,addNovelUrl:p,deleteNovelID:f,addComicUrl:w,deleteComicID:g,addNovel:C,deleteNovel:D,addComic:_,deleteComic:$}}}),V=o(89);const Z=(0,V.Z)(R,[["render",A]]);var K=Z}}]);
//# sourceMappingURL=admin.69812d46.js.map