(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["comic"],{"0021":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-2 animated faster",class:{fadeIn:t.visible,fadeOut:!t.visible},attrs:{id:"reader-nav"},on:{mouseenter:t.enter,mouseleave:t.leave}},[n("div",{staticClass:"reader-nav-buttons"},[n("button",{staticClass:"sticky-bar-el btn btn-circle btn-sm",class:{"btn-primary":t.lightOn,"btn-secondary":!t.lightOn},on:{click:function(e){return t.$router.go(-1)}}},[n("font-awesome-icon",{attrs:{icon:"home"}})],1),n("br"),n("router-link",{staticClass:"sticky-bar-el btn btn-circle btn-sm",class:{"btn-primary":t.lightOn,"btn-secondary":!t.lightOn},attrs:{to:{path:"/info/"+t.type+"/"+t.id},tag:"button"}},[n("font-awesome-icon",{attrs:{icon:"info"}})],1),n("br"),"novel"==t.type?n("div",[n("button",{staticClass:"sticky-bar-el btn btn-circle btn-sm",class:{"btn-primary":t.lightOn,"btn-secondary":!t.lightOn},on:{click:function(e){return t.changeSimplified()}}},[t._v("\n        "+t._s(t.isTW?"TW":"CH")+"\n      ")]),n("br"),n("button",{staticClass:"sticky-bar-el btn-circle btn btn-sm",class:{"btn-primary":t.lightOn,"btn-secondary":!t.lightOn},on:{click:function(e){return t.changeLight()}}},[t.lightOn?n("font-awesome-icon",{attrs:{icon:["fa","lightbulb"]}}):t._e(),t.lightOn?t._e():n("font-awesome-icon",{attrs:{icon:["far","lightbulb"]}})],1),n("br"),n("button",{staticClass:"sticky-bar-el btn btn-circle btn-sm",class:{"btn-primary":t.lightOn,"btn-secondary":!t.lightOn},on:{click:function(e){return t.changeFontSize()}}},[t._v("\n        "+t._s(["Sm","Md","Lg","Xl"][t.fontSize-1])+"\n      ")]),n("br")]):t._e(),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.index,expression:"index"}],staticClass:"sticky-bar-el chapter-text form-control form-control-sm",class:{"bg-white":t.lightOn,"text-dark":t.lightOn,"bg-dark":!t.lightOn,"text-white":!t.lightOn},attrs:{maxlength:"5"},domProps:{value:t.index},on:{input:function(e){e.target.composing||(t.index=e.target.value)}}}),n("button",{staticClass:"sticky-bar-el btn btn-circle btn-sm",class:{"btn-primary":t.lightOn,"btn-secondary":!t.lightOn},attrs:{disabled:0===t.chapterLength},on:{click:function(e){return t.changeIndex()}}},[n("font-awesome-icon",{attrs:{icon:"arrow-right"}})],1),n("br")])],1)])},c=[],s={name:"reader-nav",props:["type","id","isTW","lightOn","fontSize","currentIndex","chapterLength"],data:function(){return{visible:!1,index:0}},mounted:function(){this.index=this.currentIndex},watch:{currentIndex:function(t){this.index=t}},methods:{enter:function(){this.visible=!0},leave:function(){this.visible=!1},changeSimplified:function(){this.$emit("changeSimplified",!this.isTW)},changeLight:function(){this.$emit("changeLight",!this.lightOn)},changeFontSize:function(){this.$emit("changeFontSize",4===this.fontSize?1:this.fontSize+1)},changeIndex:function(){this.$emit("changeIndex",this.index)}}},r=s,a=(n("8bd3"),n("2877")),o=Object(a["a"])(r,i,c,!1,null,"c7ad3742",null);e["a"]=o.exports},"08b5":function(t,e,n){"use strict";var i=n("e1a1"),c=n.n(i);c.a},"8bd3":function(t,e,n){"use strict";var i=n("cb13"),c=n.n(i);c.a},cb13:function(t,e,n){},d73b:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:{"min-height":t.$root.$data.height+"px"},attrs:{id:"content"}},[n("div",{staticClass:"container",attrs:{id:"article"}},[0!==Object.keys(t.comic).length?n("div",{staticClass:"row"},[n("reader-nav",{attrs:{type:"comic",id:t.comicID,currentIndex:t.currentIndex,chapterLength:t.comic.chapters.legnth},on:{changeIndex:t.onChangeIndex}}),n("div",{staticClass:"col-12"},[n("div",{attrs:{id:"comic"}},t._l(t.sections,function(e){return n("div",{key:e.index},[t._l(e.content,function(t){return n("img",{key:t,attrs:{src:t}})}),n("hr",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{callback:function(n,i){return t.observe(n,i,e)}},expression:"{callback: (isVisible, entry) => observe(isVisible, entry, each)}"}]})],2)}),0),n("div",[n("br"),n("br"),n("center",[n("loading",{attrs:{size:150}})],1)],1)])],1):t._e()])])},c=[],s=(n("96cf"),n("3b8d")),r=n("0021"),a={name:"comic",components:{ReaderNav:r["a"]},data:function(){return{comicID:"",lightOn:!1,loading:!1,sections:[],fetchIndex:0,currentIndex:1,transitIndex:0}},created:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,n,i,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.$vuex.getters.getSession(),this.comicID=this.$route.params.comicID,this.$vuex.getters.isComicIDExists(this.comicID)){t.next=9;break}return t.next=5,this.$api.fetchComicByID(e,this.comicID);case 5:n=t.sent,this.$vuex.commit("insertComic",{comicID:this.comicID,comic:n}),t.next=16;break;case 9:if(i=this.$vuex.getters.getComicByID(this.comicID),void 0!==i.cahpers&&!this.$vuex.getters.isComicNeedUpdate(this.comicID)){t.next=15;break}return t.next=13,this.$api.fetchComicByID(e,this.comicID);case 13:c=t.sent,this.$vuex.commit("updateComic",{comicID:this.comicID,comic:c});case 15:this.currentIndex=this.bookmark["lastReadIndex"]||this.currentIndex;case 16:this.get();case 17:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),computed:{bookmark:function(){return this.$vuex.getters.getComicBookmarkByID(this.comicID)||{}},comic:function(){return this.$vuex.getters.getComicByID(this.comicID)||{}}},methods:{onChangeIndex:function(t){this.currentIndex=t,this.get()},get:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.sections=[],this.fetchIndex=this.currentIndex-1,this.transitIndex=this.currentIndex-1,t.next=5,this.fetchComicChapter(this.fetchIndex++).then(function(t){return e.sections.push(t)});case 5:return t.next=7,this.fetchComicChapter(this.fetchIndex++).then(function(t){return e.sections.push(t)});case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),fetchComicChapter:function(t){return this.$api.fetchComicChapter(this.$vuex.getters.getSession(),this.comicID,t).then(function(e){return{index:t,content:e}})},observe:function(t,e,n){var i=this;t&&this.transitIndex<n.index&&(this.currentIndex=n.index+1,this.transitIndex=n.index,this.bookmark["lastReadIndex"]=this.currentIndex,this.$vuex.commit("insertComicBookmark",{comicID:this.comic.comicID,bookmark:this.bookmark}),!this.loading&&this.fetchIndex-this.currentIndex<1&&(this.loading=!0,this.fetchComicChapter(this.fetchIndex++).then(function(t){return i.sections.push(t)}),setTimeout(function(){i.loading=!1},1e3)))}}},o=a,h=(n("08b5"),n("2877")),u=Object(h["a"])(o,i,c,!1,null,"0aff171a",null);e["default"]=u.exports},e1a1:function(t,e,n){}}]);
//# sourceMappingURL=comic.94f19041.js.map