{"version":3,"sources":["webpack:///./src/components/ReaderNav.vue?3460","webpack:///src/components/ReaderNav.vue","webpack:///./src/components/ReaderNav.vue?4c33","webpack:///./src/components/ReaderNav.vue?1c26","webpack:///./src/components/ReaderNav.vue?665c","webpack:///./src/views/books/Comic.vue?19be","webpack:///./src/views/books/Comic.vue?6754","webpack:///src/views/books/Comic.vue","webpack:///./src/views/books/Comic.vue?a54b","webpack:///./src/views/books/Comic.vue?a2f9"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","visible","attrs","on","enter","leave","lightOn","$event","$router","go","path","type","id","changeSimplified","_v","_s","isTW","changeLight","_e","changeFontSize","fontSize","directives","name","rawName","value","expression","domProps","target","composing","index","chapterLength","changeIndex","staticRenderFns","props","data","mounted","currentIndex","watch","val","methods","$emit","component","style","$root","$data","height","Object","keys","comic","length","comicID","chapters","legnth","onChangeIndex","_l","each","key","every","callback","isVisible","entry","observe","components","loading","sections","fetchIndex","transitIndex","computed","bookmark","$vuex","getters","getComicBookmarkByID","getComicByID","get","fetchComicChapter","$api","getSession","then","content","section","commit","setTimeout"],"mappings":"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","file":"js/comic.c61e791e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-2 animated faster\",class:{'fadeIn': _vm.visible, 'fadeOut': !_vm.visible},attrs:{\"id\":\"reader-nav\"},on:{\"mouseenter\":_vm.enter,\"mouseleave\":_vm.leave}},[_c('div',{staticClass:\"reader-nav-buttons\"},[_c('button',{staticClass:\"sticky-bar-el btn btn-circle btn-sm\",class:{'btn-primary': _vm.lightOn, 'btn-secondary': !_vm.lightOn},on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"home\"}})],1),_c('br'),_c('router-link',{staticClass:\"sticky-bar-el btn btn-circle btn-sm\",class:{'btn-primary': _vm.lightOn, 'btn-secondary': !_vm.lightOn},attrs:{\"to\":{ path: ('/info/' + _vm.type + '/' + _vm.id) },\"tag\":\"button\"}},[_c('font-awesome-icon',{attrs:{\"icon\":\"info\"}})],1),_c('br'),(_vm.type == 'novel')?_c('div',[_c('button',{staticClass:\"sticky-bar-el btn btn-circle btn-sm\",class:{'btn-primary': _vm.lightOn, 'btn-secondary': !_vm.lightOn},on:{\"click\":function($event){return _vm.changeSimplified()}}},[_vm._v(\"\\n        \"+_vm._s(_vm.isTW ? \"TW\" : \"CH\")+\"\\n      \")]),_c('br'),_c('button',{staticClass:\"sticky-bar-el btn-circle btn btn-sm\",class:{'btn-primary': _vm.lightOn, 'btn-secondary': !_vm.lightOn},on:{\"click\":function($event){return _vm.changeLight()}}},[(_vm.lightOn)?_c('font-awesome-icon',{attrs:{\"icon\":['fa', 'lightbulb']}}):_vm._e(),(!_vm.lightOn)?_c('font-awesome-icon',{attrs:{\"icon\":['far', 'lightbulb']}}):_vm._e()],1),_c('br'),_c('button',{staticClass:\"sticky-bar-el btn btn-circle btn-sm\",class:{'btn-primary': _vm.lightOn, 'btn-secondary': !_vm.lightOn},on:{\"click\":function($event){return _vm.changeFontSize()}}},[_vm._v(\"\\n        \"+_vm._s(['Sm', 'Md', 'Lg', 'Xl'][_vm.fontSize - 1])+\"\\n      \")]),_c('br')]):_vm._e(),_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.index),expression:\"index\"}],staticClass:\"sticky-bar-el chapter-text form-control form-control-sm\",class:{'bg-white': _vm.lightOn, 'text-dark': _vm.lightOn, 'bg-dark': !_vm.lightOn, 'text-white': !_vm.lightOn},attrs:{\"maxlength\":\"5\"},domProps:{\"value\":(_vm.index)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.index=$event.target.value}}}),_c('button',{staticClass:\"sticky-bar-el btn btn-circle btn-sm\",class:{'btn-primary': _vm.lightOn, 'btn-secondary': !_vm.lightOn},attrs:{\"disabled\":_vm.chapterLength === 0},on:{\"click\":function($event){return _vm.changeIndex()}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"arrow-right\"}})],1),_c('br')])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"reader-nav\" class=\"col-2 animated faster\" :class=\"{'fadeIn': visible, 'fadeOut': !visible}\" @mouseenter=\"enter\" @mouseleave=\"leave\">\n    <div class=\"reader-nav-buttons\">\n      <button @click=\"$router.go(-1)\" class=\"sticky-bar-el btn btn-circle btn-sm\" :class=\"{'btn-primary': lightOn, 'btn-secondary': !lightOn}\">\n        <font-awesome-icon icon=\"home\"/>\n      </button><br/>\n      <router-link :to=\"{ path: ('/info/' + type + '/' + id) }\" tag=\"button\" class=\"sticky-bar-el btn btn-circle btn-sm\" :class=\"{'btn-primary': lightOn, 'btn-secondary': !lightOn}\">\n        <font-awesome-icon icon=\"info\"/>\n      </router-link><br/>\n      <div v-if=\"type == 'novel'\">\n        <button @click=\"changeSimplified()\" class=\"sticky-bar-el btn btn-circle btn-sm\" :class=\"{'btn-primary': lightOn, 'btn-secondary': !lightOn}\">\n          {{ isTW ? \"TW\" : \"CH\" }}\n        </button><br/>\n        <button @click=\"changeLight()\" class=\"sticky-bar-el btn-circle btn btn-sm\" :class=\"{'btn-primary': lightOn, 'btn-secondary': !lightOn}\">\n          <font-awesome-icon v-if=\"lightOn\" :icon=\"['fa', 'lightbulb']\"/>\n          <font-awesome-icon v-if=\"!lightOn\" :icon=\"['far', 'lightbulb']\"/>\n        </button><br />\n        <button @click=\"changeFontSize()\" class=\"sticky-bar-el btn btn-circle btn-sm\" :class=\"{'btn-primary': lightOn, 'btn-secondary': !lightOn}\">\n          {{ ['Sm', 'Md', 'Lg', 'Xl'][fontSize - 1] }}\n        </button><br />\n      </div>\n      <div>\n        <input v-model=\"index\" class=\"sticky-bar-el chapter-text form-control form-control-sm\" :class=\"{'bg-white': lightOn, 'text-dark': lightOn, 'bg-dark': !lightOn, 'text-white': !lightOn}\" maxlength=\"5\" />\n        <button @click=\"changeIndex()\" :disabled=\"chapterLength === 0\" class=\"sticky-bar-el btn btn-circle btn-sm\" :class=\"{'btn-primary': lightOn, 'btn-secondary': !lightOn}\">\n          <font-awesome-icon icon=\"arrow-right\"/>\n        </button><br />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'reader-nav',\n  props: [ \"type\", \"id\", 'isTW', 'lightOn', 'fontSize', 'currentIndex', 'chapterLength' ],\n  data: () => ({\n    visible: false,\n    index: 0,\n  }),\n  mounted () {\n    this.index = this.currentIndex;\n  },\n  watch: {\n    'currentIndex'(val) {\n      this.index = val;\n    }\n  },\n  methods: {\n    enter() {\n      this.visible = true;\n    },\n    leave() {\n      this.visible = false;\n    },\n    changeSimplified() {\n      this.$emit('changeSimplified', !this.isTW);\n    },\n    changeLight() {\n      this.$emit('changeLight', !this.lightOn);\n    },\n    changeFontSize() {\n      this.$emit('changeFontSize', this.fontSize === 4 ? 1 : this.fontSize + 1);\n    },\n    changeIndex() {\n      this.$emit('changeIndex', this.index);\n    }\n  },\n}\n</script>\n\n<style scoped>\n  #reader-nav {\n    position: fixed;\n    top: 0px;\n    left: 0px;\n    height: 100vh;\n    z-index: 1;\n    text-align: right;\n  }\n  .reader-nav-buttons {\n    margin: 0 0 0 auto;\n    position: relative;\n    top: 5vh;\n    text-align: right;\n    width: 60px;\n    background-color: rgba(255, 255, 255, 0.5);\n    padding: 10px;\n    border-radius: 10px;\n  }\n  .sticky-bar-el {\n    margin-left: 0px;\n    margin-top: 5px;\n    width: 40px;\n    height: 31px;\n  }\n  .sticky-bar-el.chapter-text {\n    font-size: 10px;\n    padding: 3px;\n  }\n  input.sticky-bar-el {\n    text-align: center;\n    line-height: 31px;\n    height: 40px;\n    border-radius: 20px;\n  }\n  .btn-circle {\n    width: 40px;\n    height: 40px;\n    padding: 6px 0px;\n    border-color: rgba(0, 0, 0, 0.2);\n    border-radius: 20px;\n    text-align: center;\n    line-height: 1.42857;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReaderNav.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReaderNav.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ReaderNav.vue?vue&type=template&id=6330e8a0&scoped=true&\"\nimport script from \"./ReaderNav.vue?vue&type=script&lang=js&\"\nexport * from \"./ReaderNav.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ReaderNav.vue?vue&type=style&index=0&id=6330e8a0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6330e8a0\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReaderNav.vue?vue&type=style&index=0&id=6330e8a0&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comic.vue?vue&type=style&index=0&id=e740df66&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({ 'min-height': _vm.$root.$data.height + 'px' }),attrs:{\"id\":\"content\"}},[_c('div',{staticClass:\"container\",attrs:{\"id\":\"article\"}},[(Object.keys(_vm.comic).length !== 0)?_c('div',{staticClass:\"row\"},[_c('reader-nav',{attrs:{\"type\":'comic',\"id\":_vm.comicID,\"currentIndex\":_vm.currentIndex,\"chapterLength\":_vm.comic.chapters.legnth},on:{\"changeIndex\":_vm.onChangeIndex}}),_c('div',{staticClass:\"col-12\"},[_c('div',{attrs:{\"id\":\"comic\"}},_vm._l((_vm.sections),function(each){return _c('div',{key:each.index},[_vm._l((each.content),function(every){return _c('img',{key:every,attrs:{\"src\":every,\"referrerpolicy\":\"no-referrer\"}})}),_c('hr',{directives:[{name:\"observe-visibility\",rawName:\"v-observe-visibility\",value:({callback: function (isVisible, entry) { return _vm.observe(isVisible, entry, each); }}),expression:\"{callback: (isVisible, entry) => observe(isVisible, entry, each)}\"}]})],2)}),0),_c('div',[_c('br'),_c('br'),_c('center',[_c('loading',{attrs:{\"size\":150}})],1)],1)])],1):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"content\" :style=\"{ 'min-height': $root.$data.height + 'px' }\">\n    <div id=\"article\" class=\"container\">\n      <div v-if=\"Object.keys(comic).length !== 0\" class=\"row\">\n        <reader-nav\n          :type=\"'comic'\"\n          :id=\"comicID\"\n          :currentIndex=\"currentIndex\" @changeIndex=\"onChangeIndex\"\n          :chapterLength=\"comic.chapters.legnth\"/>\n        <div class=\"col-12\">\n          <div id=\"comic\">\n            <div v-for=\"each in sections\" :key=\"each.index\">\n              <img v-for=\"every in each.content\" :key=\"every\" :src=\"every\" referrerpolicy=\"no-referrer\" />\n              <hr v-observe-visibility=\"{callback: (isVisible, entry) => observe(isVisible, entry, each)}\"/>\n            </div>\n          </div>\n          <div>\n            <br><br>\n            <center><loading :size=\"150\"/></center>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ReaderNav from '@/components/ReaderNav';\n\nexport default {\n  name: 'comic',\n  components: { ReaderNav },\n  data () {\n    return {\n      comicID: \"\",\n      lightOn: false,\n      loading: false,\n      sections: [],\n      fetchIndex: 0,\n      currentIndex: 1,\n      transitIndex: 0\n    }\n  },\n  async created () {\n    const session = this.$vuex.getters.getSession();\n    this.comicID = this.$route.params.comicID;\n\n    if (!this.$vuex.getters.isComicIDExists(this.comicID)) {\n      let comic = await this.$api.fetchComicByID(session, this.comicID)\n      this.$vuex.commit('insertComic', {comicID: this.comicID, comic: comic})\n    } else {\n      let localComic = this.$vuex.getters.getComicByID(this.comicID);\n      if (localComic.cahpers === undefined || this.$vuex.getters.isComicNeedUpdate(this.comicID)) {\n        let comic = await this.$api.fetchComicByID(session, this.comicID)\n        this.$vuex.commit('updateComic', {comicID: this.comicID, comic: comic})\n      }\n      this.currentIndex = this.bookmark['lastReadIndex'] || this.currentIndex\n    }\n    this.get();\n  },\n  computed: {\n    bookmark () {\n      return this.$vuex.getters.getComicBookmarkByID(this.comicID) || {}\n    },\n    comic () {\n      return this.$vuex.getters.getComicByID(this.comicID) || {}\n    }\n  },\n  methods: {\n    onChangeIndex(index) {\n      this.currentIndex = index;\n      this.get();\n    },\n    async get () {\n      this.sections = [];\n      this.fetchIndex = this.currentIndex - 1;\n      this.transitIndex = this.currentIndex - 1;\n      \n      await this.fetchComicChapter(this.fetchIndex++).then(data => this.sections.push(data));\n      await this.fetchComicChapter(this.fetchIndex++).then(data => this.sections.push(data));\n    },\n    fetchComicChapter (index) {\n      return this.$api.fetchComicChapter(this.$vuex.getters.getSession(), this.comicID, index).then(data => {\n        return {\n          index: index,\n          content: data\n        }\n      })\n    },\n    observe(isVisible, entry, section) {\n      if (isVisible) {\n        if (this.transitIndex < section.index) {\n          this.currentIndex = section.index + 1;\n          this.transitIndex = section.index;\n          this.bookmark['lastReadIndex'] = this.currentIndex;\n          this.$vuex.commit('insertComicBookmark', { comicID: this.comic.comicID, bookmark: this.bookmark});\n          if (!this.loading && this.fetchIndex - this.currentIndex < 1) {\n            this.loading = true;\n            this.fetchComicChapter(this.fetchIndex++).then(data => this.sections.push(data));\n            setTimeout(() => {\n              this.loading = false;\n            }, 1000);\n          }\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .container.light-on {\n    background-color: white;\n    color:  #2c3e50;\n  }\n  .container.light-off {\n    color: #d3d3d3;\n  }\n</style>\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comic.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Comic.vue?vue&type=template&id=e740df66&scoped=true&\"\nimport script from \"./Comic.vue?vue&type=script&lang=js&\"\nexport * from \"./Comic.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Comic.vue?vue&type=style&index=0&id=e740df66&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e740df66\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}