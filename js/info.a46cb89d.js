"use strict";(self["webpackChunksilverfish"]=self["webpackChunksilverfish"]||[]).push([[996],{3849:function(t,e,r){r.d(e,{Z:function(){return A}});var n=r(3396),o=r(6265),a=r.n(o),i=r(1474);function s(t,e,r,n,o,a,i){try{var s=t[a](i),c=s.value}catch(l){return void r(l)}s.done?e(c):Promise.resolve(c).then(n,o)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){s(a,n,o,i,c,"next",t)}function c(t){s(a,n,o,i,c,"throw",t)}i(void 0)}))}}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f="axios-retry";function _(t){return!t.response&&Boolean(t.code)&&"ECONNABORTED"!==t.code&&i(t)}var p=["get","head","options"],h=p.concat(["put","delete"]);function E(t){return"ECONNABORTED"!==t.code&&(!t.response||t.response.status>=500&&t.response.status<=599)}function m(t){return!!t.config&&(E(t)&&-1!==p.indexOf(t.config.method))}function y(t){return!!t.config&&(E(t)&&-1!==h.indexOf(t.config.method))}function T(t){return _(t)||y(t)}function R(){return 0}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=100*Math.pow(2,t),r=.2*e*Math.random();return e+r}function C(t){var e=t[f]||{};return e.retryCount=e.retryCount||0,t[f]=e,e}function v(t,e){return u(u({},e),t[f])}function D(t,e){t.defaults.agent===e.agent&&delete e.agent,t.defaults.httpAgent===e.httpAgent&&delete e.httpAgent,t.defaults.httpsAgent===e.httpsAgent&&delete e.httpsAgent}function w(t,e,r,n){return O.apply(this,arguments)}function O(){return O=c((function*(t,e,r,n){var o=r.retryCount<t&&e(n);if("object"===typeof o)try{return yield o,!0}catch(a){return!1}return o})),O.apply(this,arguments)}function I(t,e){t.interceptors.request.use((t=>{var e=C(t);return e.lastRequestTime=Date.now(),t})),t.interceptors.response.use(null,function(){var r=c((function*(r){var{config:n}=r;if(!n)return Promise.reject(r);var{retries:o=3,retryCondition:a=T,retryDelay:i=R,shouldResetTimeout:s=!1}=v(n,e),c=C(n);if(yield w(o,a,c,r)){c.retryCount+=1;var l=i(c.retryCount,r);if(D(t,n),!s&&n.timeout&&c.lastRequestTime){var u=Date.now()-c.lastRequestTime;n.timeout=Math.max(n.timeout-u-l,1)}return n.transformRequest=[t=>t],new Promise((e=>setTimeout((()=>e(t(n))),l)))}return Promise.reject(r)}));return function(t){return r.apply(this,arguments)}}())}I.isNetworkError=_,I.isSafeRequestError=m,I.isIdempotentRequestError=y,I.isNetworkOrIdempotentRequestError=T,I.exponentialDelay=g,I.isRetryableError=E;var N=r(4677);function A(){const t=(0,N.pm)(),e=(0,n.FN)()?.appContext.config.globalProperties.$endpoint,r=(0,n.FN)()?.appContext.config.globalProperties.$apiVersionRoute,o=`${e}${r}`,i=a().create({baseURL:`${o}/novels`}),s=a().create({baseURL:`${o}/comics`});function c(e){return new Promise(((r,n)=>i.get("",{headers:{Authorization:e}}).then((t=>t.data.success?r(t.data.data.map((t=>({...t,lastCrawlTime:new Date(t.lastCrawlTime)})))):n(t.data.data))).catch((e=>t.error(`發生錯誤: ${e.toString()}`)))))}function l(e,r){return new Promise(((n,o)=>i.get(`/${r}`,{headers:{Authorization:e}}).then((t=>{if(t.data.success){const e=t.data.data;return n({isEnable:e.isEnable,novelID:e.novelID,author:e.author,description:e.description,dns:e.dns,url:e.url,title:e.title,cover_url:e.coverUrl,chapters:e.chapters,lastCrawlTime:new Date(e.lastCrawlTime)})}return o(t.data.data)})).catch((e=>t.error(`發生錯誤: ${e.toString()}`)))))}function u(e,r,n){return new Promise(((o,a)=>i.get(`/${r}/chapter/${n}`,{headers:{Authorization:e}}).then((t=>t.data.success?o(t.data.data):a(t.data.data))).catch((e=>t.error(`發生錯誤: ${e.toString()}`)))))}function d(e){return new Promise(((r,n)=>s.get("",{headers:{Authorization:e}}).then((t=>t.data.success?r(t.data.data.map((t=>({...t,lastCrawlTime:new Date(t.lastCrawlTime)})))):n(t.data.data))).catch((e=>t.error(`發生錯誤: ${e.toString()}`)))))}function f(e,r){return new Promise(((n,o)=>s.get(`/${r}`,{headers:{Authorization:e}}).then((t=>{if(t.data.success){const e=t.data.data;return n({comicID:e.comicID,author:e.author,description:e.description,dns:e.dns,url:e.url,title:e.title,cover_url:e.coverUrl,chapters:e.chapters,lastCrawlTime:new Date(e.lastCrawlTime)})}return o(t.data.data)})).catch((e=>t.error(`發生錯誤: ${e.toString()}`)))))}function _(e,r,n){return new Promise(((o,a)=>s.get(`/${r}/chapter/${n}`,{headers:{Authorization:e}}).then((t=>t.data.success?o(t.data.data):a(t.data.data))).catch((e=>t.error(`發生錯誤: ${e.toString()}`)))))}return I(i,{retries:3}),I(s,{retries:3}),{$endpointRoute:o,fetchNovels:c,fetchNovelByID:l,fetchNovelChapter:u,fetchComics:d,fetchComicByID:f,fetchComicChapter:_}}},1474:function(t){const e=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);t.exports=t=>!e.has(t&&t.code)},3758:function(t,e,r){r.r(e),r.d(e,{default:function(){return k}});var n=r(3396),o=r(7139);const a=t=>((0,n.dD)("data-v-1a005f1c"),t=t(),(0,n.Cn)(),t),i={key:0},s=a((()=>(0,n._)("br",null,null,-1))),c={key:1,class:"row"},l={class:"col-12 col-md-2 offset-md-2"},u=["src","alt"],d={class:"col-10 offset-1 col-md-5 offset-md-0"},f={style:{"padding-top":"10px"}},_={style:{"text-align":"left"}},p={class:"d-none d-lg-block",style:{"text-align":"right"}},h=["href"],E={class:"btn-xs btn-color-2 intro"},m=(0,n.Uk)("   "),y={class:"btn-xs btn-color-1 intro"},T=a((()=>(0,n._)("br",null,null,-1))),R={class:"d-md-none",style:{"text-align":"right"}},g=["href"],C={class:"btn-xs btn-color-2 intro"},v=(0,n.Uk)(" Source "),D=(0,n.Uk)("   "),w={class:"btn-xs btn-color-1 intro"},O=a((()=>(0,n._)("br",null,null,-1))),I=a((()=>(0,n._)("hr",null,null,-1))),N={style:{"text-align":"right"}},A={style:{"padding-top":"10px","text-align":"left"}},b=a((()=>(0,n._)("br",null,null,-1))),L={class:"col-10 offset-1"},U={class:"row"};function P(t,e,r,a,P,S){const x=(0,n.up)("loading"),F=(0,n.up)("center"),B=(0,n.up)("big"),$=(0,n.up)("font-awesome-icon");return(0,n.wg)(),(0,n.iD)("div",{id:"content",class:"container",style:(0,o.j5)({"min-height":t.withFootHeight+"px"})},[1==t.load?((0,n.wg)(),(0,n.iD)("div",i,[s,(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[(0,n.Wm)(x,{size:160})])),_:1})])):((0,n.wg)(),(0,n.iD)("div",c,[(0,n._)("div",l,[(0,n._)("img",{src:t.entry.cover_url,alt:t.entry.title},null,8,u)]),(0,n._)("div",d,[(0,n._)("div",f,[(0,n._)("div",null,[(0,n._)("div",_,[(0,n.Wm)(B,{class:"btn-xs intro"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)("novel"===t.type?"小說":"漫畫"),1)])),_:1}),(0,n._)("h4",null,[(0,n._)("strong",null,(0,o.zw)(t.entry.title),1)])]),(0,n._)("div",p,[(0,n._)("a",{href:t.entry.url},[(0,n._)("small",E,(0,o.zw)(t.entry.dns),1)],8,h),m,(0,n._)("small",y,(0,o.zw)(t.formatDate(t.entry.lastCrawlTime)),1),T]),(0,n._)("div",R,[(0,n._)("a",{href:t.entry.url},[(0,n._)("small",C,[(0,n.Wm)($,{icon:"link"}),v])],8,g),D,(0,n._)("small",w,(0,o.zw)(t.simpleFormatDate(t.entry.lastCrawlTime)),1),O])]),I,(0,n._)("h6",N,[(0,n._)("strong",null,(0,o.zw)(t.entry.author)+" / 著",1)])]),(0,n._)("div",A,[(0,n._)("p",null,(0,o.zw)(t.entry.description),1),b])]),(0,n._)("div",L,[(0,n._)("div",U,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.entry.chapters,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"col-md-3 offset-md-0 col-11 offset-1 left middle",style:{padding:"3px 0"},key:t.title},(0,o.zw)(t.title),1)))),128))])])]))],4)}var S=r(4870),x=r(678),F=r(3849),B=r(1883),$=(0,n.aZ)({setup(){const t=(0,x.yj)(),{fetchComicByID:e,fetchNovelByID:r}=(0,F.Z)(),{formatDate:o,simpleFormatDate:a}=(0,B.Z)(),i=(0,S.iH)(!0),s=(0,S.iH)(""),c=(0,S.iH)(""),l=(0,S.qj)({}),u=(0,n.f3)("withFootHeight"),d=(0,n.f3)("session");return{session:d,routeType:t.params.type,routeId:t.params.id,withFootHeight:u,load:i,type:s,id:c,entry:l,fetchComicByID:e,fetchNovelByID:r,formatDate:o,simpleFormatDate:a}},beforeRouteEnter(t,e,r){r((async t=>{const{session:e,routeType:r,routeId:n,fetchNovelByID:o,fetchComicByID:a}=t;if(t.type=r,t.id=n,"novel"===r)t.entry=await o(e,n);else{if("comic"!==r)return!1;t.entry=await a(e,n)}return t.load=!1,!0}))}}),j=r(89);const H=(0,j.Z)($,[["render",P],["__scopeId","data-v-1a005f1c"]]);var k=H}}]);
//# sourceMappingURL=info.a46cb89d.js.map