"use strict";(self["webpackChunksilverfish"]=self["webpackChunksilverfish"]||[]).push([[93],{3849:function(t,e,n){n.d(e,{Z:function(){return N}});var r=n(3396),o=n(6265),i=n.n(o),a=(n(7658),n(1474));function l(t,e,n,r,o,i,a){try{var l=t[i](a),c=l.value}catch(s){return void n(s)}l.done?e(c):Promise.resolve(c).then(r,o)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){l(i,r,o,a,c,"next",t)}function c(t){l(i,r,o,a,c,"throw",t)}a(void 0)}))}}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _="axios-retry";function m(t){return!t.response&&Boolean(t.code)&&"ECONNABORTED"!==t.code&&a(t)}var f=["get","head","options"],v=f.concat(["put","delete"]);function h(t){return"ECONNABORTED"!==t.code&&(!t.response||t.response.status>=500&&t.response.status<=599)}function E(t){return!!t.config&&(h(t)&&-1!==f.indexOf(t.config.method))}function p(t){return!!t.config&&(h(t)&&-1!==v.indexOf(t.config.method))}function y(t){return m(t)||p(t)}function D(){return 0}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=100*Math.pow(2,t),n=.2*e*Math.random();return e+n}function w(t){var e=t[_]||{};return e.retryCount=e.retryCount||0,t[_]=e,e}function R(t,e){return u(u({},e),t[_])}function T(t,e){t.defaults.agent===e.agent&&delete e.agent,t.defaults.httpAgent===e.httpAgent&&delete e.httpAgent,t.defaults.httpsAgent===e.httpsAgent&&delete e.httpsAgent}function C(t,e,n,r){return I.apply(this,arguments)}function I(){return I=c((function*(t,e,n,r){var o=n.retryCount<t&&e(r);if("object"===typeof o)try{var i=yield o;return!1!==i}catch(a){return!1}return o})),I.apply(this,arguments)}function O(t,e){t.interceptors.request.use((t=>{var e=w(t);return e.lastRequestTime=Date.now(),t})),t.interceptors.response.use(null,function(){var n=c((function*(n){var{config:r}=n;if(!r)return Promise.reject(n);var{retries:o=3,retryCondition:i=y,retryDelay:a=D,shouldResetTimeout:l=!1,onRetry:c=(()=>{})}=R(r,e),s=w(r);if(yield C(o,i,s,n)){s.retryCount+=1;var u=a(s.retryCount,n);if(T(t,r),!l&&r.timeout&&s.lastRequestTime){var d=Date.now()-s.lastRequestTime,_=r.timeout-d-u;if(_<=0)return Promise.reject(n);r.timeout=_}return r.transformRequest=[t=>t],c(s.retryCount,n,r),new Promise((e=>setTimeout((()=>e(t(r))),u)))}return Promise.reject(n)}));return function(t){return n.apply(this,arguments)}}())}O.isNetworkError=m,O.isSafeRequestError=E,O.isIdempotentRequestError=p,O.isNetworkOrIdempotentRequestError=y,O.exponentialDelay=g,O.isRetryableError=h;var b=n(4677);function N(){const t=(0,b.pm)(),e=(0,r.FN)()?.appContext.config.globalProperties.$endpoint,n=(0,r.FN)()?.appContext.config.globalProperties.$apiVersionRoute,o=`${e}${n}`,a=i().create({baseURL:`${o}/novels`}),l=i().create({baseURL:`${o}/comics`});function c(e){return new Promise(((n,r)=>a.get("",{headers:{Authorization:e}}).then((t=>t.data.success?n(t.data.data.map((t=>({...t,lastCrawlTime:new Date(t.lastCrawlTime)})))):r(t.data.data))).catch((e=>t.error(`發生錯誤: ${e.toString()}`)))))}function s(e,n){return new Promise(((r,o)=>a.get(`/${n}`,{headers:{Authorization:e}}).then((t=>{if(t.data.success){const e=t.data.data;return r({isEnable:e.isEnable,novelID:e.novelID,author:e.author,description:e.description,dns:e.dns,url:e.url,title:e.title,cover_url:e.coverUrl,chapters:e.chapters,lastCrawlTime:new Date(e.lastCrawlTime)})}return o(t.data.data)})).catch((e=>t.error(`發生錯誤: ${e.toString()}`)))))}function u(e,n,r){return new Promise(((o,i)=>a.get(`/${n}/chapter/${r}`,{headers:{Authorization:e}}).then((t=>t.data.success?o(t.data.data):i(t.data.data))).catch((e=>t.error(`發生錯誤: ${e.toString()}`)))))}function d(e){return new Promise(((n,r)=>l.get("",{headers:{Authorization:e}}).then((t=>t.data.success?n(t.data.data.map((t=>({...t,lastCrawlTime:new Date(t.lastCrawlTime)})))):r(t.data.data))).catch((e=>t.error(`發生錯誤: ${e.toString()}`)))))}function _(e,n){return new Promise(((r,o)=>l.get(`/${n}`,{headers:{Authorization:e}}).then((t=>{if(t.data.success){const e=t.data.data;return r({comicID:e.comicID,author:e.author,description:e.description,dns:e.dns,url:e.url,title:e.title,cover_url:e.coverUrl,chapters:e.chapters,lastCrawlTime:new Date(e.lastCrawlTime)})}return o(t.data.data)})).catch((e=>t.error(`發生錯誤: ${e.toString()}`)))))}function m(e,n,r){return new Promise(((o,i)=>l.get(`/${n}/chapter/${r}`,{headers:{Authorization:e}}).then((t=>t.data.success?o(t.data.data):i(t.data.data))).catch((e=>t.error(`發生錯誤: ${e.toString()}`)))))}return O(a,{retries:3}),O(l,{retries:3}),{$endpointRoute:o,fetchNovels:c,fetchNovelByID:s,fetchNovelChapter:u,fetchComics:d,fetchComicByID:_,fetchComicChapter:m}}},1474:function(t){const e=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);t.exports=t=>!e.has(t&&t.code)},9785:function(t,e,n){n.r(e),n.d(e,{default:function(){return J}});var r=n(3396),o=n(7139);const i=t=>((0,r.dD)("data-v-0bda709d"),t=t(),(0,r.Cn)(),t),a={class:"container"},l=i((()=>(0,r._)("h1",null,"Novels",-1))),c={key:0,class:"row"},s={class:"col-6 col-md-3"},u={class:"col-6 col-md-3"},d={class:"col-6 col-md-3"},_={class:"col-6 col-md-3"},m={key:1},f=i((()=>(0,r._)("hr",null,null,-1))),v=i((()=>(0,r._)("h1",null,"Comics",-1))),h={key:2,class:"row"},E={class:"col-6 col-md-3"},p={class:"col-6 col-md-3"},y={class:"col-6 col-md-3"},D={class:"col-6 col-md-3"},g={key:3};function w(t,e,n,i,w,R){const T=(0,r.up)("list-card"),C=(0,r.up)("loading"),I=(0,r.up)("center");return(0,r.wg)(),(0,r.iD)("div",{id:"content",style:(0,o.j5)({"min-height":`${t.height}px`})},[(0,r._)("div",a,[l,0!==t.novels.length?((0,r.wg)(),(0,r.iD)("div",c,[(0,r._)("div",s,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.novels.filter(((t,e)=>e%4==0)),(t=>((0,r.wg)(),(0,r.j4)(T,{key:t.novelID,entry:t},null,8,["entry"])))),128))]),(0,r._)("div",u,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.novels.filter(((t,e)=>e%4==1)),(t=>((0,r.wg)(),(0,r.j4)(T,{key:t.novelID,entry:t},null,8,["entry"])))),128))]),(0,r._)("div",d,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.novels.filter(((t,e)=>e%4==2)),(t=>((0,r.wg)(),(0,r.j4)(T,{key:t.novelID,entry:t},null,8,["entry"])))),128))]),(0,r._)("div",_,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.novels.filter(((t,e)=>e%4==3)),(t=>((0,r.wg)(),(0,r.j4)(T,{key:t.novelID,entry:t},null,8,["entry"])))),128))])])):((0,r.wg)(),(0,r.iD)("div",m,[(0,r.Wm)(I,null,{default:(0,r.w5)((()=>[(0,r.Wm)(C,{size:150})])),_:1})])),f,v,0!==t.comics.length?((0,r.wg)(),(0,r.iD)("div",h,[(0,r._)("div",E,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.comics.filter(((t,e)=>e%4==0)),(t=>((0,r.wg)(),(0,r.j4)(T,{key:t.comicID,entry:t},null,8,["entry"])))),128))]),(0,r._)("div",p,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.comics.filter(((t,e)=>e%4==1)),(t=>((0,r.wg)(),(0,r.j4)(T,{key:t.comicID,entry:t},null,8,["entry"])))),128))]),(0,r._)("div",y,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.comics.filter(((t,e)=>e%4==2)),(t=>((0,r.wg)(),(0,r.j4)(T,{key:t.comicID,entry:t},null,8,["entry"])))),128))]),(0,r._)("div",D,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.comics.filter(((t,e)=>e%4==3)),(t=>((0,r.wg)(),(0,r.j4)(T,{key:t.comicID,entry:t},null,8,["entry"])))),128))])])):((0,r.wg)(),(0,r.iD)("div",g,[(0,r.Wm)(I,null,{default:(0,r.w5)((()=>[(0,r.Wm)(C,{size:150})])),_:1})]))])],4)}var R=n(4870),T=n(2483),C=n(3196),I=n(3849);const O=t=>((0,r.dD)("data-v-4bd036c2"),t=t(),(0,r.Cn)(),t),b={class:"list-card"},N=["alt"],A={class:"text-info-section"},L={style:{"text-align":"left"}},P={style:{"text-align":"right"}},U={class:"icon-info-section d-none d-lg-block"},S=O((()=>(0,r._)("small",{tag:"small",class:"btn-xm btn-color-2 intro"},"簡介",-1))),j=O((()=>(0,r._)("small",{class:"btn-xm btn-color-3 intro"},"閱讀",-1))),$=O((()=>(0,r._)("br",null,null,-1))),k={class:"btn-xm btn-color-1 intro"},F=O((()=>(0,r._)("br",null,null,-1))),x={class:"d-md-none"},H={class:"btn-xm btn-color-2 intro"},B={class:"btn-xm btn-color-3 intro"},Y=O((()=>(0,r._)("br",null,null,-1))),z={class:"btn-xm btn-color-1 intro"};function G(t,e,n,i,a,l){const c=(0,r.up)("router-link"),s=(0,r.up)("font-awesome-icon"),u=(0,r.Q2)("lazy");return(0,r.wg)(),(0,r.j4)(c,{to:{path:void 0!==t.entry.novelID?`/novel/${t.entry.novelID}`:`/comic/${t.entry.comicID}`}},{default:(0,r.w5)((()=>[(0,r._)("div",b,[(0,r.wy)((0,r._)("img",{alt:t.entry.title,referrerpolicy:"no-referrer"},null,8,N),[[u,t.entry.coverUrl]]),(0,r._)("div",A,[(0,r._)("div",L,[(0,r._)("h6",null,[(0,r._)("strong",null,(0,o.zw)(t.entry.title),1)])]),(0,r._)("div",P,[(0,r._)("small",null,(0,o.zw)(t.entry.author)+" / 著",1)])]),(0,r._)("div",U,[(0,r.Wm)(c,{to:{path:"/info/"+(void 0!==t.entry.novelID?`novel/${t.entry.novelID}`:`comic/${t.entry.comicID}`)}},{default:(0,r.w5)((()=>[S])),_:1},8,["to"]),(0,r.Uk)("   "),(0,r.Wm)(c,{to:{path:void 0!==t.entry.novelID?`/novel/${t.entry.novelID}`:`/comic/${t.entry.comicID}`}},{default:(0,r.w5)((()=>[j])),_:1},8,["to"]),$,(0,r._)("small",k,(0,o.zw)(t.formatDate(t.entry.lastCrawlTime,!0)),1),F]),(0,r._)("div",x,[(0,r.Wm)(c,{to:{path:"/info/"+(void 0!==t.entry.novelID?`novel/${t.entry.novelID}`:`comic/${t.entry.comicID}`)}},{default:(0,r.w5)((()=>[(0,r._)("small",H,[(0,r.Wm)(s,{icon:"info-circle"})])])),_:1},8,["to"]),(0,r.Uk)("   "),(0,r.Wm)(c,{to:{path:void 0!==t.entry.novelID?`/novel/${t.entry.novelID}`:`/comic/${t.entry.comicID}`}},{default:(0,r.w5)((()=>[(0,r._)("small",B,[(0,r.Wm)(s,{icon:"book-open"})])])),_:1},8,["to"]),Y,(0,r._)("small",z,(0,o.zw)(t.simpleFormatDate(t.entry.lastCrawlTime)),1)])])])),_:1},8,["to"])}var q=n(1883),K=(0,r.aZ)({name:"list-card",props:["entry"],setup(){const{formatDate:t,simpleFormatDate:e}=(0,q.Z)();return{formatDate:t,simpleFormatDate:e}}}),W=n(89);const Z=(0,W.Z)(K,[["render",G],["__scopeId","data-v-4bd036c2"]]);var M=Z,V=(0,r.aZ)({components:{ListCard:M},setup(){(0,T.yj)();const t=(0,C.oR)(),e=(0,r.f3)("height"),n=(0,r.f3)("fetchBookmark"),o=(0,r.f3)("session"),{fetchComics:i,fetchNovels:a}=(0,I.Z)(),l=(0,R.qj)([]),c=(0,R.qj)([]),s=()=>{a(o.value).then((e=>{Object.assign(l,e),l.forEach((e=>t.commit("book/upsertNovel",e)))})),i(o.value).then((e=>{Object.assign(c,e),c.forEach((e=>t.commit("book/upsertComic",e)))}))};return(0,r.bv)((()=>{s(),n()})),{height:e,novels:l,comics:c}}});const X=(0,W.Z)(V,[["render",w],["__scopeId","data-v-0bda709d"]]);var J=X}}]);
//# sourceMappingURL=list.9962228a.js.map