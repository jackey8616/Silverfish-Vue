"use strict";(self["webpackChunksilverfish"]=self["webpackChunksilverfish"]||[]).push([[93],{6170:function(t,e,n){n.d(e,{Z:function(){return c}});var o=n(3396),l=n(6265),r=n.n(l),a=n(4677);function c(){const t=(0,a.pm)(),e=(0,o.FN)()?.appContext.config.globalProperties.$endpoint,n=(0,o.FN)()?.appContext.config.globalProperties.$apiVersionRoute;function l(){return`${e}${n}`}function c(e){return new Promise(((n,o)=>r()({url:`${l()}/novels`,method:"GET",headers:{Authorization:e}}).then((t=>t.data.success?n(t.data.data.map((t=>({...t,lastCrawlTime:new Date(t.lastCrawlTime)})))):o(t.data.data))).catch((e=>t.error(`發生錯誤: ${e.toString()}`)))))}function i(e,n){return new Promise(((o,a)=>r()({url:`${l()}/novel`,method:"GET",headers:{Authorization:e},params:{novel_id:n}}).then((t=>{if(t.data.success){const e=t.data.data;return o({isEnable:e.isEnable,novelID:e.novelID,author:e.author,description:e.description,dns:e.dns,url:e.url,title:e.title,cover_url:e.coverUrl,chapters:e.chapters,lastCrawlTime:new Date(e.lastCrawlTime)})}return a(t.data.data)})).catch((e=>t.error(`發生錯誤: ${e.toString()}`)))))}function s(e,n,o){return new Promise(((a,c)=>r()({url:`${l()}/chapter`,method:"GET",headers:{Authorization:e},params:{novel_id:n,chapter_index:o}}).then((t=>t.data.success?a(t.data.data):c(t.data.data))).catch((e=>t.error(`發生錯誤: ${e.toString()}`)))))}function d(e){return new Promise(((n,o)=>r()({url:`${l()}/comics`,method:"GET",headers:{Authorization:e}}).then((t=>t.data.success?n(t.data.data.map((t=>({...t,lastCrawlTime:new Date(t.lastCrawlTime)})))):o(t.data.data))).catch((e=>t.error(`發生錯誤: ${e.toString()}`)))))}function u(e,n){return new Promise(((o,a)=>r()({url:`${l()}/comic`,method:"GET",headers:{Authorization:e},params:{comic_id:n}}).then((t=>{if(t.data.success){const e=t.data.data;return o({comicID:e.comicID,author:e.author,description:e.description,dns:e.dns,url:e.url,title:e.title,cover_url:e.coverUrl,chapters:e.chapters,lastCrawlTime:new Date(e.lastCrawlTime)})}return a(t.data.data)})).catch((e=>t.error(`發生錯誤: ${e.toString()}`)))))}function m(e,n,o){return new Promise(((a,c)=>r()({url:`${l()}/comic/chapter`,method:"GET",headers:{Authorization:e},params:{comic_id:n,chapter_index:o}}).then((t=>t.data.success?a(t.data.data):c(t.data.data))).catch((e=>t.error(`發生錯誤: ${e.toString()}`)))))}return{endpointRoute:l,fetchNovels:c,fetchNovelByID:i,fetchNovelChapter:s,fetchComics:d,fetchComicByID:u,fetchComicChapter:m}}},1374:function(t,e,n){n.r(e),n.d(e,{default:function(){return tt}});var o=n(3396),l=n(7139);const r=t=>((0,o.dD)("data-v-1ac08d12"),t=t(),(0,o.Cn)(),t),a={class:"container"},c=r((()=>(0,o._)("h1",null,"Novels",-1))),i={key:0,class:"row"},s={class:"col-6 col-md-3"},d={class:"col-6 col-md-3"},u={class:"col-6 col-md-3"},m={class:"col-6 col-md-3"},h={key:1},v=r((()=>(0,o._)("hr",null,null,-1))),f=r((()=>(0,o._)("h1",null,"Comics",-1))),p={key:2,class:"row"},w={class:"col-6 col-md-3"},y={class:"col-6 col-md-3"},D={class:"col-6 col-md-3"},g={class:"col-6 col-md-3"},_={key:3};function I(t,e,n,r,I,b){const $=(0,o.up)("list-card"),k=(0,o.up)("loading"),C=(0,o.up)("center");return(0,o.wg)(),(0,o.iD)("div",{id:"content",style:(0,l.j5)({"min-height":t.height+"px"})},[(0,o._)("div",a,[c,0!==t.novels.length?((0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("div",s,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.novels.filter(((t,e)=>e%4==0)),(t=>((0,o.wg)(),(0,o.j4)($,{key:t.novelID,entry:t},null,8,["entry"])))),128))]),(0,o._)("div",d,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.novels.filter(((t,e)=>e%4==1)),(t=>((0,o.wg)(),(0,o.j4)($,{key:t.novelID,entry:t},null,8,["entry"])))),128))]),(0,o._)("div",u,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.novels.filter(((t,e)=>e%4==2)),(t=>((0,o.wg)(),(0,o.j4)($,{key:t.novelID,entry:t},null,8,["entry"])))),128))]),(0,o._)("div",m,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.novels.filter(((t,e)=>e%4==3)),(t=>((0,o.wg)(),(0,o.j4)($,{key:t.novelID,entry:t},null,8,["entry"])))),128))])])):((0,o.wg)(),(0,o.iD)("div",h,[(0,o.Wm)(C,null,{default:(0,o.w5)((()=>[(0,o.Wm)(k,{size:150})])),_:1})])),v,f,0!==t.comics.length?((0,o.wg)(),(0,o.iD)("div",p,[(0,o._)("div",w,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.comics.filter(((t,e)=>e%4==0)),(t=>((0,o.wg)(),(0,o.j4)($,{key:t.comicID,entry:t},null,8,["entry"])))),128))]),(0,o._)("div",y,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.comics.filter(((t,e)=>e%4==1)),(t=>((0,o.wg)(),(0,o.j4)($,{key:t.comicID,entry:t},null,8,["entry"])))),128))]),(0,o._)("div",D,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.comics.filter(((t,e)=>e%4==2)),(t=>((0,o.wg)(),(0,o.j4)($,{key:t.comicID,entry:t},null,8,["entry"])))),128))]),(0,o._)("div",g,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.comics.filter(((t,e)=>e%4==3)),(t=>((0,o.wg)(),(0,o.j4)($,{key:t.comicID,entry:t},null,8,["entry"])))),128))])])):((0,o.wg)(),(0,o.iD)("div",_,[(0,o.Wm)(C,null,{default:(0,o.w5)((()=>[(0,o.Wm)(k,{size:150})])),_:1})]))])],4)}var b=n(4870),$=n(678),k=n(3196),C=n(6170);const T=t=>((0,o.dD)("data-v-b9dcc04c"),t=t(),(0,o.Cn)(),t),j={class:"list-card"},x=["src","alt"],z={class:"text-info-section"},E={style:{"text-align":"left"}},W={style:{"text-align":"right"}},P={class:"icon-info-section d-none d-lg-block"},Y=T((()=>(0,o._)("small",{tag:"small",class:"btn-xm btn-color-2 intro"},"簡介",-1))),H=(0,o.Uk)("   "),K=T((()=>(0,o._)("small",{class:"btn-xm btn-color-3 intro"},"閱讀",-1))),N=T((()=>(0,o._)("br",null,null,-1))),S={class:"btn-xm btn-color-1 intro"},Z=T((()=>(0,o._)("br",null,null,-1))),A={class:"d-md-none"},G={class:"btn-xm btn-color-2 intro"},F=(0,o.Uk)("   "),U={class:"btn-xm btn-color-3 intro"},B=T((()=>(0,o._)("br",null,null,-1))),R={class:"btn-xm btn-color-1 intro"};function q(t,e,n,r,a,c){const i=(0,o.up)("router-link"),s=(0,o.up)("font-awesome-icon");return(0,o.wg)(),(0,o.j4)(i,{to:{path:void 0!==t.entry.novelID?`/novel/${t.entry.novelID}`:`/comic/${t.entry.comicID}`}},{default:(0,o.w5)((()=>[(0,o._)("div",j,[(0,o._)("img",{src:t.entry.coverUrl,alt:t.entry.title,referrerpolicy:"no-referrer"},null,8,x),(0,o._)("div",z,[(0,o._)("div",E,[(0,o._)("h6",null,[(0,o._)("strong",null,(0,l.zw)(t.entry.title),1)])]),(0,o._)("div",W,[(0,o._)("small",null,(0,l.zw)(t.entry.author)+" / 著",1)])]),(0,o._)("div",P,[(0,o.Wm)(i,{to:{path:"/info/"+(void 0!==t.entry.novelID?`novel/${t.entry.novelID}`:`comic/${t.entry.comicID}`)}},{default:(0,o.w5)((()=>[Y])),_:1},8,["to"]),H,(0,o.Wm)(i,{to:{path:void 0!==t.entry.novelID?`/novel/${t.entry.novelID}`:`/comic/${t.entry.comicID}`}},{default:(0,o.w5)((()=>[K])),_:1},8,["to"]),N,(0,o._)("small",S,(0,l.zw)(t.formatDate(t.entry.lastCrawlTime)),1),Z]),(0,o._)("div",A,[(0,o.Wm)(i,{to:{path:"/info/"+(void 0!==t.entry.novelID?`novel/${t.entry.novelID}`:`comic/${t.entry.comicID}`)}},{default:(0,o.w5)((()=>[(0,o._)("small",G,[(0,o.Wm)(s,{icon:"info-circle"})])])),_:1},8,["to"]),F,(0,o.Wm)(i,{to:{path:void 0!==t.entry.novelID?`/novel/${t.entry.novelID}`:`/comic/${t.entry.comicID}`}},{default:(0,o.w5)((()=>[(0,o._)("small",U,[(0,o.Wm)(s,{icon:"book-open"})])])),_:1},8,["to"]),B,(0,o._)("small",R,(0,l.zw)(t.simpleFormatDate(t.entry.lastCrawlTime)),1)])])])),_:1},8,["to"])}var O=n(1883),L=(0,o.aZ)({name:"list-card",props:["entry"],setup(){const{formatDate:t,simpleFormatDate:e}=(0,O.Z)();return{formatDate:t,simpleFormatDate:e}}}),V=n(89);const J=(0,V.Z)(L,[["render",q],["__scopeId","data-v-b9dcc04c"]]);var M=J,Q=(0,o.aZ)({components:{ListCard:M},setup(){const t=(0,$.yj)(),e=(0,k.oR)(),n=(0,o.f3)("height"),l=(0,o.f3)("fetchBookmark"),{fetchComics:r,fetchNovels:a}=(0,C.Z)(),c=(0,b.qj)([]),i=(0,b.qj)([]),s=()=>{const t=e.getters["auth/getSession"];a(t).then((t=>{Object.assign(c,t),c.forEach((t=>e.commit("book/upsertNovel",t)))})),r(t).then((t=>{Object.assign(i,t),i.forEach((t=>e.commit("book/upsertComic",t)))}))};return(0,o.bv)((()=>{s(),l()})),(0,o.YP)((()=>t.name),(t=>{null!==t&&void 0!==t&&!1!==["home","list"].includes(t.toString())&&(s(),l())})),{height:n,novels:c,comics:i}}});const X=(0,V.Z)(Q,[["render",I],["__scopeId","data-v-1ac08d12"]]);var tt=X}}]);
//# sourceMappingURL=list.d44fc3fc.js.map