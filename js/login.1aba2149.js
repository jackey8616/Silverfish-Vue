(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"22c9":function(t,e,i){},5326:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",style:{"min-height":t.$root.$data.withFootHeight+"px"},attrs:{id:"content"}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-8 offset-2 col-md-4 offset-md-4",attrs:{id:"form"}},[i("form",[i("div",{staticClass:"input-group mb-3"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.auth.account,expression:"auth.account"}],staticClass:"form-control",attrs:{type:"text",placeholder:"帳號",required:""},domProps:{value:t.auth.account},on:{input:function(e){e.target.composing||t.$set(t.auth,"account",e.target.value)}}}),t.auth.account.length>0?i("div",{staticClass:"input-group-append"},[i("button",{staticClass:"btn btn-sm btn-light",attrs:{type:"button",tabindex:"-1"},on:{click:function(e){t.auth.account=""}}},[i("font-awesome-icon",{attrs:{icon:["far","times-circle"]}})],1)]):t._e()]),i("div",{staticClass:"input-group mb-3"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.auth.password,expression:"auth.password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"密碼",required:""},domProps:{value:t.auth.password},on:{input:function(e){e.target.composing||t.$set(t.auth,"password",e.target.value)}}}),t.auth.password.length>0?i("div",{staticClass:"input-group-append"},[i("button",{staticClass:"btn btn-sm btn-light",attrs:{type:"button",tabindex:"-1"},on:{click:function(e){t.auth.password=""}}},[i("font-awesome-icon",{attrs:{icon:["far","times-circle"]}})],1)]):t._e()]),i("div",{staticClass:"form-group",staticStyle:{"text-align":"right"}},[i("vue-recaptcha",{ref:"invisibleRecaptcha",attrs:{size:"invisible",loadRecaptchaScript:!0,sitekey:"6LdgzKYUAAAAAG8KH1AHc_Xjj7yVcAYXZFj7PsPH"},on:{verify:t.onRecaptchaVerfiy,expired:t.onRecaptchaExpired}}),0==t.load?i("div",[i("div",{staticClass:"row justify-content-around"},[i("div",{staticClass:"col-2",staticStyle:{"text-align":"left"}},[i("input",{staticClass:"btn-sm btn-color-2",attrs:{disabled:t.valid(),type:"button",value:"登入"},on:{click:function(e){return t.submitLogin()}}})]),i("div",{staticClass:"col-8",attrs:{title:"保持連續一周的登入狀態"}},[i("small",[t._v("保持登入?")]),t._v("\n                 \n                "),i("toggle-button",{attrs:{width:38,height:19,marge:0},model:{value:t.auth.keepLogin,callback:function(e){t.$set(t.auth,"keepLogin",e)},expression:"auth.keepLogin"}})],1)]),i("div",{staticClass:"row"},[i("div",{staticClass:"col align-self-end",staticStyle:{"text-align":"right"}},[i("router-link",{attrs:{to:{name:"register"},tag:"small"}},[t._v("註冊")]),t._v("\n                 \n                "),i("small",{attrs:{title:"關我屁事"}},[t._v("忘記密碼?")])],1)])]):i("div",[i("br"),i("center",[i("loading",{attrs:{size:80}})],1)],1)],1)])])])])},n=[],o=i("e096"),r={name:"login",components:{VueRecaptcha:o["a"]},data:function(){return{load:!1,auth:{keepLogin:!1,account:"",password:""}}},mounted:function(){"https:"!=location.protocol&&(location.href="https:"+window.location.href.substring(window.location.protocol.length))},methods:{valid:function(){return""===this.auth.account||""===this.auth.password},submitLogin:function(){this.load=!0,this.$refs.invisibleRecaptcha.execute()},onRecaptchaExpired:function(){this.$refs.invisibleRecaptcha.reset()},onRecaptchaVerfiy:function(t){var e=this;this.$api.authLogin(this.$vuex.getters.getSession(),t,this.auth).then((function(t){e.$vuex.commit("login",t),e.$toasted.success("登入成功"),e.$router.push({name:"list"})})).catch((function(t){"Recaptcha verify failed"===t.reason?e.$toasted.error("Google Recaptch 驗證失敗！"):"Account or Password wrong"===t.reason?e.$toasted.error("帳號或密碼錯誤！"):"Account not exists"===t.reason?e.$toasted.error("帳號不存在！"):(e.$toasted.error("未知錯誤！"),console.error(t)),e.onRecaptchaExpired(),e.load=!1}))}}},s=r,c=(i("58bf"),i("2877")),u=Object(c["a"])(s,a,n,!1,null,"15e919a2",null);e["default"]=u.exports},"58bf":function(t,e,i){"use strict";i("22c9")},e096:function(t,e,i){"use strict";function a(){return a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},a.apply(this,arguments)}var n=function(){var t=!1,e=[],i=function(i){if(!t){t=!0;for(var a=0,n=e.length;a<n;a++)e[a](i)}},a=function(i){t?i():e.push(i)},n={resolved:function(){return t},resolve:i,promise:{then:a}};return n},o=Object.prototype.hasOwnProperty;function r(){var t=n();return{notify:function(){t.resolve()},wait:function(){return t.promise},render:function(t,e,i){this.wait().then((function(){i(window.grecaptcha.render(t,e))}))},reset:function(t){"undefined"!==typeof t&&(this.assertLoaded(),this.wait().then((function(){return window.grecaptcha.reset(t)})))},execute:function(t){"undefined"!==typeof t&&(this.assertLoaded(),this.wait().then((function(){return window.grecaptcha.execute(t)})))},checkRecaptchaLoad:function(){o.call(window,"grecaptcha")&&o.call(window.grecaptcha,"render")&&this.notify()},assertLoaded:function(){if(!t.resolved())throw new Error("ReCAPTCHA has not been loaded")}}}var s=r();"undefined"!==typeof window&&(window.vueRecaptchaApiLoaded=s.notify);var c={name:"VueRecaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String},badge:{type:String},type:{type:String},size:{type:String},tabindex:{type:String},loadRecaptchaScript:{type:Boolean,default:!1},recaptchaScriptId:{type:String,default:"__RECAPTCHA_SCRIPT"},recaptchaHost:{type:String,default:"www.google.com"},language:{type:String,default:""}},beforeMount:function(){if(this.loadRecaptchaScript&&!document.getElementById(this.recaptchaScriptId)){var t=document.createElement("script");t.id=this.recaptchaScriptId,t.src="https://"+this.recaptchaHost+"/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit&hl="+this.language,t.async=!0,t.defer=!0,document.head.appendChild(t)}},mounted:function(){var t=this;s.checkRecaptchaLoad();var e=a({},this.$props,{callback:this.emitVerify,"expired-callback":this.emitExpired,"error-callback":this.emitError}),i=this.$slots["default"]?this.$el.children[0]:this.$el;s.render(i,e,(function(e){t.$widgetId=e,t.$emit("render",e)}))},methods:{reset:function(){s.reset(this.$widgetId)},execute:function(){s.execute(this.$widgetId)},emitVerify:function(t){this.$emit("verify",t)},emitExpired:function(){this.$emit("expired")},emitError:function(){this.$emit("error")}},render:function(t){return t("div",{},this.$slots["default"])}};e["a"]=c}}]);
//# sourceMappingURL=login.1aba2149.js.map