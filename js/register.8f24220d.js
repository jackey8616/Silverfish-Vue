"use strict";(self["webpackChunksilverfish"]=self["webpackChunksilverfish"]||[]).push([[685],{7676:function(e,t,n){n.d(t,{Z:function(){return s}});n(1703);var a=n(3396),r=n(4870);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o.apply(this,arguments)}var i=function(){var e=!1,t=[],n=function(){if(!e){e=!0;for(var n=0,a=t.length;n<a;n++)t[n]()}},a=function(n){e?n():t.push(n)},r={resolved:function(){return e},resolve:n,promise:{then:a}};return r},c=Object.prototype.hasOwnProperty;function l(){var e=i();return{notify:function(){e.resolve()},wait:function(){return e.promise},render:function(e,t,n){this.wait().then((function(){n(window.grecaptcha.render(e,t))}))},reset:function(e){"undefined"!==typeof e&&(this.assertLoaded(),this.wait().then((function(){return window.grecaptcha.reset(e)})))},execute:function(e){"undefined"!==typeof e&&(this.assertLoaded(),this.wait().then((function(){return window.grecaptcha.execute(e)})))},checkRecaptchaLoad:function(){c.call(window,"grecaptcha")&&c.call(window.grecaptcha,"render")&&this.notify()},assertLoaded:function(){if(!e.resolved())throw new Error("ReCAPTCHA has not been loaded")}}}var u=l();"undefined"!==typeof window&&(window.vueRecaptchaApiLoaded=u.notify);var s=(0,a.aZ)({name:"VueRecaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String},badge:{type:String},type:{type:String},size:{type:String},tabindex:{type:String},loadRecaptchaScript:{type:Boolean,default:!0},recaptchaScriptId:{type:String,default:"__RECAPTCHA_SCRIPT"},recaptchaHost:{type:String,default:"www.google.com"},language:{type:String,default:""}},emits:["render","verify","expired","error"],setup:function(e,t){var n=t.slots,i=t.emit,c=(0,r.iH)(null),l=(0,r.iH)(null),s=function(e){i("verify",e)},d=function(){i("expired")},p=function(){i("error")};return(0,a.bv)((function(){if(u.checkRecaptchaLoad(),e.loadRecaptchaScript&&!document.getElementById(e.recaptchaScriptId)){var t=document.createElement("script");t.id=e.recaptchaScriptId,t.src="https://"+e.recaptchaHost+"/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit&hl="+e.language,t.async=!0,t.defer=!0,document.head.appendChild(t)}var a=o({},e,{callback:s,"expired-callback":d,"error-callback":p}),r=c.value,h=n["default"]?r.children[0]:r;u.render(h,a,(function(e){l.value=e,i("render",e)}))})),{root:c,widgetId:l,reset:function(){u.reset(l.value)},execute:function(){u.execute(l.value)}}},render:function(){var e,t=this.$slots["default"];return e="function"===typeof t?t():t,(0,a.h)("div",{ref:"root"},e)}})},2437:function(e,t,n){n.r(t),n.d(t,{default:function(){return Z}});var a=n(3396),r=n(7139),o=n(9242);const i=e=>((0,a.dD)("data-v-4196b226"),e=e(),(0,a.Cn)(),e),c={class:"row"},l={id:"form",class:"col-8 offset-2 col-md-6 offset-md-3"},u=(0,a.Uk)("為什麼需要註冊？"),s=i((()=>(0,a._)("ul",null,[(0,a._)("li",null,"壹、保持多裝置間閱讀書籤的紀錄可以同步。"),(0,a._)("li",null,[(0,a.Uk)("貳、針對每隻書蟲的閱讀習慣推薦相似的書籍。"),(0,a._)("small",null,"（未來功能）")]),(0,a._)("li",null,[(0,a._)("del",null,"參、大家都有註冊，好像我們沒有也不行。")])],-1))),d=(0,a.Uk)("我的資料安全嗎？"),p=i((()=>(0,a._)("p",null,"每個帳號的使用過程中，我們只會紀錄該帳號的註冊時間, 上次登錄時間及閱讀紀錄。",-1))),h=i((()=>(0,a._)("p",null,"註冊時並不會收集除帳號密碼外的任何額外資料，未來規劃也只會使用閱讀紀錄來做分析使用者習慣。",-1))),f=i((()=>(0,a._)("p",null,"如果您仍然有安全上的疑慮，可以使用簡單好記的帳號密碼申請即可。",-1))),v={class:"input-group mb-3"},w={key:0,class:"input-group-append"},g={class:"input-group mb-3"},y={key:0,class:"input-group-append"},b={class:"form-group",style:{"text-align":"right"}},m={class:"row"},_={class:"col-10 offset-1"},k={key:0,style:{"text-align":"left"}},R=["disabled"],x={key:1},S=i((()=>(0,a._)("br",null,null,-1)));function H(e,t,n,i,H,A){const C=(0,a.up)("big"),j=(0,a.up)("font-awesome-icon"),V=(0,a.up)("vue-recaptcha"),E=(0,a.up)("loading"),L=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)("div",{id:"content",class:"container",style:(0,r.j5)({"min-height":`${e.withFootHeight}px`})},[(0,a._)("div",c,[(0,a._)("div",l,[(0,a._)("b",null,[(0,a.Wm)(C,null,{default:(0,a.w5)((()=>[u])),_:1})]),s,(0,a._)("b",null,[(0,a.Wm)(C,null,{default:(0,a.w5)((()=>[d])),_:1})]),p,h,f,(0,a._)("form",null,[(0,a._)("div",v,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.auth.account=t),class:"form-control",type:"text",placeholder:"帳號"},null,512),[[o.nr,e.auth.account]]),e.auth.account.length>0?((0,a.wg)(),(0,a.iD)("div",w,[(0,a._)("button",{onClick:t[1]||(t[1]=t=>e.auth.account=""),class:"btn btn-sm btn-light",type:"button",tabindex:"-1"},[(0,a.Wm)(j,{icon:["far","times-circle"]})])])):(0,a.kq)("",!0)]),(0,a._)("div",g,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.auth.password=t),class:"form-control",type:"password",placeholder:"密碼"},null,512),[[o.nr,e.auth.password]]),e.auth.password.length>0?((0,a.wg)(),(0,a.iD)("div",y,[(0,a._)("button",{onClick:t[3]||(t[3]=t=>e.auth.password=""),class:"btn btn-sm btn-light",type:"button",tabindex:"-1"},[(0,a.Wm)(j,{icon:["far","times-circle"]})])])):(0,a.kq)("",!0)]),(0,a._)("div",b,[(0,a.Wm)(V,{ref:"invisibleRecaptcha",size:"invisible",onVerify:e.onRecaptchaVerfiy,onExpired:e.onRecaptchaExpired,loadRecaptchaScript:!0,sitekey:"6LdgzKYUAAAAAG8KH1AHc_Xjj7yVcAYXZFj7PsPH"},null,8,["onVerify","onExpired"]),(0,a._)("div",m,[(0,a._)("div",_,[0==e.load?((0,a.wg)(),(0,a.iD)("div",k,[(0,a._)("input",{onClick:t[4]||(t[4]=t=>e.submitRegister()),disabled:e.valid(),class:"btn-sm btn-color-2",type:"button",value:"註冊"},null,8,R)])):((0,a.wg)(),(0,a.iD)("div",x,[S,(0,a.Wm)(L,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,{size:80})])),_:1})]))])])])])])])],4)}var A=n(4870),C=n(7676),j=n(678),V=n(3196),E=n(2417),L=n(4677),I=(0,a.aZ)({components:{VueRecaptcha:C.Z},setup(){const e=(0,j.tv)(),t=(0,V.oR)(),n=(0,L.pm)(),{authRegister:r}=(0,E.Z)(),o=(0,a.f3)("withFootHeight"),i=(0,A.iH)(!1),c=(0,A.qj)({account:"",password:""}),l=(0,A.iH)(null),u=()=>""===c.account||""===c.password,s=()=>{i.value=!0,l.value.execute()},d=()=>l.value.reset(),p=a=>{r(a,c).then((a=>{t.dispatch("auth/login",a),n("註冊成功"),e.push({name:"list"})})).catch((e=>{"Recaptcha verify failed"===e.reason?n.error("Google Recaptch 驗證失敗！"):"account exists"===e.reason?n.error("帳號已存在！"):(n.error("未知錯誤！"),console.error(e)),d(),i.value=!1}))};return(0,a.bv)((()=>{"https:"!==window.location.protocol&&(window.location.href=`https:${window.location.href.substring(window.location.protocol.length)}`)})),{withFootHeight:o,load:i,auth:c,valid:u,submitRegister:s,onRecaptchaExpired:d,onRecaptchaVerfiy:p}}}),P=n(89);const W=(0,P.Z)(I,[["render",H],["__scopeId","data-v-4196b226"]]);var Z=W}}]);
//# sourceMappingURL=register.8f24220d.js.map